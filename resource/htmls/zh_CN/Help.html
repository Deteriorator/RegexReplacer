<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<META http-equiv="Content-Type" content="text/html; charset=utf-8">
<TITLE>
使用帮助
</TITLE>

<META NAME="date" CONTENT="2013-07-16">

</HEAD>

<BODY BGCOLOR="lightgray">
<h2>功能：</h2>
执行复杂的正则查找替换<br>
<h2>特色：</h2>
1、加入了替换表达式，可实现复杂的替换，假如提供的替换函数还不能满足你的需求，你还可以自己添加函数（参见自定义函数说明）<br>
2、实时显示替换预览，可选定其中几条匹配结果来执行替换<br>
3、可以仅提取替换结果<br>
<br>
<h2>替换表达式：</h2>
在替换表达式中，允许穿插使用函数（函数参数也可穿插字符，则该参数将被拼接成一个字符串），其格式为：<br>
<b>$函数名(参数1,参数2,参数3)</b><br>
<b>$函数名[引用别名](参数1,参数2,参数3)</b>（“引用别名”请参考Ref和StcRef函数）<br>
<br>
如果须使用特殊符号，如“$”，则在其前面加上转义符“\” 如果某个参数没输入任何字符，则该参数为空字符串，而不是null<br>
<br>
表达式中的函数是从左向右调用的，引用的时候，须注意这点。如果某个函数A是另一个函数B的参数，则调用B时，A会被先调用(函数Iif中略有不同，详情请参见函数描述)<br>
<br>
<b>注意：</b><br>
1、对于函数Add、Subtract、Multiply、Divide、Mod、Seq，如果有一个参数是小数，那么函数将返回小数，否则为整数（即使是Divide），空和null被视为0， “1.0”、“1.”均被视为小数<br>
<br>
2、如果使用了序列，并且只进行部分替换，则实际替换内容可能会跟表格中显示的替换内容不一致。<br>
<br>
例1：“名次$Seq(1,1):”<br>
将生成：<br>
名次1：<br>
名次2：<br>
名次3：<br>
……<br>
例2：“$Iif($AbsRow(),1,排名,名次$Seq(1,1)：)”<br>
将生成：<br>
排名<br>
名次1：<br>
名次2：<br>
名次3：<br>
名次4：<br>
……<br>
<br>
<h2>具体案例：</h2>
<h3>1、辅助日志分析</h3>
<b>需求：</b>日志一般包含各种各样的信息，当需要查看某一类型的信息时，即使借助UE等工具也很难直观地查看想要的内容，只能一条一条地搜索<br>
<b>解决方案：</b>将日志复制到文本框中，输入合适的正则表达式，以匹配感兴趣的内容，结果列表里即可显示所有关心的内容；借助“焦点返回”功能，点击某条结果后，可定位到它在日志中的位置，方便查看上下文；也可以将借助“仅获取匹配内容”来抽取出所有感兴趣的信息<br>
<h3>2、捕获组和四则运算</h3>
<b>内容：</b><br>
3*4=?<br>
-6*12=?<br>
9*-5=?<br>
<b>要求：</b>将原内容变成<br>
3乘以4等于12<br>
-6乘以12等于-72<br>
9乘以-5等于-45<br>
<b>解决方案：</b><br>
<b>匹配表达式：</b><br>
<pre>(-?\d+)\*(-?\d+)=\?</pre>
<b>替换表达式：</b><br>
<pre>$(1)乘以$(2)等于$*($(1),$(2))</pre>
<h3>3、序列1</h3>
<b>内容：</b><br>
a=34<br>
b=65<br>
c=54<br>
<b>要求：</b>将每行前面加上从10开始，步增为10的序号和顿号<br>
10、a=34<br>
20、b=65<br>
30、c=54<br>
<b>解决方案：</b><br>
勾选正则表达式参数的MULTILINE<br>
<b>匹配表达式：</b><br>
<pre>^</pre>
<b>替换表达式：</b><br>
<pre>$Seq(10,10)、</pre>
<br>
<h3>4、序列2（复杂，无太大实际意义，仅作为一个参考）</h3>
<b>要求：</b>生成九九乘法表<br>
<pre>
1 * 1 = 1
1 * 2 = 2	2 * 2 = 4
1 * 3 = 3	2 * 3 = 6	3 * 3 = 9
……
</pre>
<b>解决方案：</b>在内容中随便输入45个字符<br>
<b>匹配表达式：</b><br>
<pre>.</pre>
<b>替换表达式：</b><br>
<pre>$Iif($Seq[n](1,1,$Seq[m](1,1,9)),1,,	)$StcRef(n) * $StcRef(m) = $*($StcRef(n),$StcRef(m))$Iif($StcRef(n),$StcRef(m),
,)

</pre>
<h3>5、字符大小写转换</h3>
<b>内容：</b>（文档中的文本）<br>
权限的类型有：typea,typeb,typec,typed<br>
<b>要求：</b>生成Java代码，将类型定义为公共常量，大写并带有值<br>
public static final byte TYPEA = 1;<br>
public static final byte TYPEB = 2;<br>
public static final byte TYPEC = 4;<br>
public static final byte TYPED = 8;<br>
<b>解决方案：</b><br>
<b>匹配表达式：</b><br>
<pre>\w+<br></pre>
<b>替换表达式：</b><br>
<pre>public static final byte $Upper($(0)) = $Iif[tv]($*[v]($StcRef(tv),2),0,1,$StcRef(v));

</pre>
然后使用“仅获取替换内容”来获得结果<br>
<br>
<h3>6、将某些字符串替换为给定字符串（复杂）</h3>
<b>内容：</b><br>
第1题答案是__。<br>
第2题答案是__。<br>
第3题答案是__。<br>
……<br>
<b>要求：</b>使用对应的答案替换掉下划线<br>
答案为：<br>
1: D<br>
2: A<br>
3: C<br>
……<br>
目标结果为：<br>
第1题答案是D。<br>
第2题答案是A。<br>
第3题答案是C。<br>
……<br>
<b>解决方案：</b><br>
先将内容填入文本框<br>
使用匹配表达式：<br>
<pre>__</pre>
<b>替换表达式：</b><br>
<pre>\$($Seq(1,1))</pre>
替换后得到字符串（记为串A）：<br>
第1题答案是$(1)。<br>
第2题答案是$(2)。<br>
第3题答案是$(3)。<br>
……<br>
<br>
然后将上面的答案<br>
1: D<br>
2: A<br>
3: C<br>
填入文本框<br>
使用<b>匹配表达式：</b><br>
<pre>[A-D]</pre>
<b>替换表达式：</b><br>
<pre>$(0)</pre>
然后使用“仅获取替换内容”，得到字符串（记为串B）：<br>
DAC<br>
修改<b>替换表达式为：</b><br>
<pre>($(0))</pre>
然后使用“仅获取替换内容”，得到字符串（记为串C）：<br>
(D)(A)(C)<br>
<br>
现在将串B填入文本框<br>
<b>匹配表达式：</b><br>
串C<br>
<b>替换表达式：</b><br>
串A<br>
然后执行替换（记得先取消选中“仅获取替换内容”），即可得到目标结果<br>
<br>
<h3>7、将某些字符串替换为给定字符串（使用新函数Case）</h3>
<b>内容：</b><br>
第1题答案是__。<br>
第2题答案是__。<br>
第3题答案是__。<br>
……<br>
<b>要求：</b>使用对应的答案替换掉下划线<br>
答案为：<br>
1: D<br>
2: A<br>
3: C<br>
……<br>
目标结果为：<br>
第1题答案是D。<br>
第2题答案是A。<br>
第3题答案是C。<br>
……<br>
<b>解决方案：</b><br>
将上面的答案<br>
1: D<br>
2: A<br>
3: C<br>
……<br>
填入文本框<br>
使用<b>匹配表达式：</b><br>
<pre>[A-D]</pre>
<b>替换表达式：</b><br>
<pre>$Seq(1,1),$(0),</pre>
然后使用“仅获取替换内容”，得到字符串：<br>
1,D,2,A,3,C,<br>
稍作修改、补充，得到字符串（记为串A）：<br>
$Case($Seq(1,1),1,D,2,A,3,C)<br>
然后将上面的内容<br>
第1题答案是__。<br>
第2题答案是__。<br>
第3题答案是__。<br>
……<br>
填入文本框<br>
使用<b>匹配表达式：</b><br>
<pre>__</pre>
<b>替换表达式：</b><br>
串A<br>
然后执行替换（记得先取消选中“仅获取替换内容”），即可得到目标结果<br>
<br>
</BODY>
</HTML>